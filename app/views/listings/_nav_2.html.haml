%nav.bottom_nav
  / Add new listing
  - if !current_user.present?
    %div.add-listing
      Log in to add listings
  - else
    %div.add-listing{"data-target" => "#add-listing", "data-toggle" => "modal", :type => "button"}
      %i{:class => "fa fa-plus-circle", :style => "color: rgba(255, 153, 0, 0.8);"}
      Add Listing

  / Search Bar & campus select
  .search-bar
    - if current_user.present?
      .show-all
        = link_to "Show All", {controller: "listings", action: "index", show_all: "all"}
    / Campus select bar, saved to use for later
    / .campus-select-container
    /   = form_tag listings_path, method: :get, id: 'campus-selection' do
    /     = select_tag :c, options_for_select(universities), :onchange => ("$('.campus-form-submit').click()")
    /     = submit_tag "Enter", :style => "display: none;", :class => "campus-form-submit"
    / Search Bar
    .search-container
      = form_tag search_path, method: :get, id: 'search-query' do
        = text_field_tag :q, nil, placeholder: "Search by Listing, Username, or by Campus!"
        = submit_tag "Search", :style => "display: none;"
    %a.search-button
      %i{:class => "fa fa-search fa-2x"}
    
/ Add Listing Modal Starts here
- if !current_user.nil?
  #add-listing.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
    .modal-dialog
      .modal-content.listing
        .modal-header
          %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
            %span{"aria-hidden" => "true"} Ã—
          %h4#myModalLabel.modal-title Add Listing
        .modal-body
          .welcome-login-form{:style => "text-align: center;"}
            / Form for New Listing
            = simple_form_for @listing, html: { multipart: true } do |f|
              .input-group.login
                .input-group-addon
                  %i{:class => "fa fa-lightbulb-o"}
                = f.input :title, :class => "form-control", label: false, placeholder: "Listing Title"
              .input-group.login
                .input-group-addon
                  %i{:class => "fa fa-pencil-square-o"}
                = f.input :description, :class => "form-control", label: false, placeholder: "Write production description here"
              .input-group.login
                .input-group-addon
                  %i{:class => "fa fa-usd"}              
                = f.input :price, :class => "form-control", label: false, placeholder: "Price"
              .input-group.login
                .input-group-label
                  = f.label :category
                = f.select :category, options_for_select(categories), label: "Category"
              .input-group.login
                .input-group-label
                  = f.label :campus
                = f.select :campus, options_for_select(universities, current_user.campus), label: "Campus"
              .input-group.login
                .input-group-label
                  = f.label :"Add Image"
                = f.simple_fields_for :images, label: "Add Image" do |image|
                  .upload
                    = image.file_field :picture
              .input-group.login
                = f.button :submit, :class => "btn btn-primary"